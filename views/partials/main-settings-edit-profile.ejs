<link rel="stylesheet" href="/css/settings-profile-forms.css">
<h1 class="title">Edit Profile</h1>
<form id="editProfileForm">
  
  <!-- Avatar Editor -->
  <div class="avatar-edit-wrapper" title="Change profile picture">
    <!-- The hover overlay with the pencil icon -->
    <div class="avatar-hover-icon">
      <i class="bi bi-pencil-fill"></i>
    </div>
    
    <% if (profile && profile.avatarPath) { %>
      <img
        class="profile-avatar-large"
        src="/static/<%= profile.avatarPath %>"
        alt="<%= profile.name %>'s avatar"
        onerror="this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';"
      />
      <div class="profile-avatar-emoji-large" style="display: none;">ðŸ‘¤</div>
    <% } else { %>
      <div class="profile-avatar-emoji-large">ðŸ‘¤</div>
    <% } %>
  </div>

  <!-- Name Input Field -->
  <div class="field">
    <label class="label" for="name">Profile name</label>
    <input 
      id="name" 
      class="input" 
      type="text" 
      value="<%= profile ? profile.name : '' %>" 
      required
    />
  </div>

  <!-- Save Button -->
  <button class="btn" type="submit">Save Changes</button>
  
  <!-- Divider -->
  <hr class="form-divider" />

  <button class="btn btn-danger" type="button" title="Delete this profile">
    <i class="bi bi-x-lg"></i>
    <span>Delete Profile</span>
  </button>
  <div id="msg"></div>
</form>
